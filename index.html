<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Pattern Collider</title>

  <meta name="viewport" content="width=device-width,  initial-scale=1.0">
  <meta name="description" content="Create & Share Infinite Tiling Patterns">
  <meta name="author" content="Aatish Bhatia">

  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">

  <link rel="stylesheet" type="text/css" href="normalize.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <!-- Load in libraries here -->
  <script src="libraries/vue.dev.js"></script>
  <script src="libraries/p5.min.js"></script>
  <script src="libraries/hsluv.min.js"></script>
  <script src="libraries/seedrandom.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,600;1,300;1,600&family=Raleway:wght@200;300;400;700&display=swap" rel="stylesheet"> 
</head>

<body>

<div id="root"> <!-- Vue can only access things contained within this div -->

  <header>
    <!-- Tiloscope / Pattern Scope / Pattern Prism / Pattern Collider / Prismatic / Infini-tile / Tilomatic -->
    <h1>Pattern Collider</h1>
    <h3>Create & Share Infinite Tiling Patterns</h3>
  </header>

  <main>

    <div class="half">
      <div>
        Grid
        <button class="save" @click="gridDownloadCount++">ðŸ’¾</button>
      </div>
      <div class="stretch">
        <p5 src="./drawGrid.js"
        :style="{display: canvasDisplaySetting}"
        :data="{
          grid: grid,
          multiplier: multiplier,
          spacing: spacing,
          intersectionPoints: intersectionPoints,
          showIntersections: showIntersections,
          selectedLines: selectedLines,
          selectedTiles: selectedTiles,
          display: canvasDisplaySetting,
          rotate: rotate,
          download: gridDownloadCount
        }"
        v-on:update:selected-lines="selectedLines = $event"
        v-on:update:add-line="selectedLines = [...selectedLines, $event]"
        v-on:update:remove-line="selectedLines = selectedLines.filter(e => e.angle !== $event.angle && e.index !== $event.index)"
        v-on:update:resize-completed="canvas1Resized = true"
        v-on:update:width="width = $event"
        v-on:update:height="height = $event"
        ></p5>
      </div>
    </div>

    <div class="half">
      <div>
        Tiling
        <button class="save" @click="tilingDownloadCount++">ðŸ’¾</button>
      </div>
      <div class="stretch">
        <p5 src="./drawTiles.js"
        :style="{display: canvasDisplaySetting}"
        :data="{
          tiles: intersectionPoints,
          steps: steps,
          multiplier: multiplier,
          zoom: zoom,
          colorTiles: colorTiles,
          colors: colorPalette,
          selectedLines: selectedLines,
          selectedTiles: selectedTiles,
          display: canvasDisplaySetting,
          symmetry: symmetry,
          stroke: stroke,
          showStroke: showStroke,
          rotate: rotate,
          orientationColoring: orientationColoring,
          download: tilingDownloadCount
        }"
        v-on:update:add-tile="selectedTiles = [...selectedTiles, $event]"
        v-on:update:remove-tile="selectedTiles = selectedTiles.filter(e => !(e.x == $event.x && e.y == $event.y))"
        v-on:update:resize-completed="canvas2Resized = true"
        ></p5>
      </div>
    </div>

    <div id="corner">
        <button @click="clearSelection" v-if="selectedTiles.length > 0 || selectedLines.length > 0">Clear Selection</button>
        <button @click="reset" v-if="queryURL.length > 0">Reset</button>
    </div>

  </main>

  <footer>

    <div class="grid">

      <div>
        <input class="slider" type="range" id="symmetry" v-model.number="symmetry" min="3" max="20" step="1"></input>
        <label for="symmetry"><span class="dotted">{{ symmetry }}</span> Fold Symmetry</label>       
      </div>

      <div>
        <input class="slider" type="range" id="pattern" v-model.number="pattern" min="0" max="1" step="0.01"></input>
        <label for="pattern">Pattern:  <span class="dotted">{{ pattern }}</span></label>        
      </div>

      <div>
        <input class="slider" type="range" id="disorder" v-model.number="disorder" min="0" max="1" step="0.01"></input>
        <label for="disorder">Disorder:  <span class="dotted">{{ disorder }}</span></label>        
      </div>

      <div>
        <button @click="randomSeed = Math.round(100 * (randomSeed + 0.01)) / 100">Randomize</button>
      </div>

      <div>
        <input class="slider" type="range" id="radius" v-model.number="radius" min="0" max="150" step="1"></input>
        <label for="radius">Radius</label>        
      </div>

      <div>
        <input class="slider" type="range" id="zoom" v-model.number="zoom" min="0.25" max="3" step="0.01"></input>
        <label for="zoom">Zoom</label>        
      </div>

      <div>
        <input class="slider" type="range" id="rotate" v-model.number="rotate" min="-180" max="180" step="1"></input>
        <label for="rotate">Rotate: {{rotate}}Â°</label>        
      </div>

      <div>
        <div>
          <label for="colorTiles">Color Tiles</label>
          <input type="checkbox" id="colorTiles" v-model="colorTiles" class="checkbox">
        </div>
      </div>

      <div>
        <div>
          <label for="showIntersections">Intersections</label>
          <input type="checkbox" id="showIntersections" v-model="showIntersections" class="checkbox">
        </div>
      </div>

      <div>
        <input class="slider" type="range" id="stroke" v-model.number="stroke" min="0" max="255" step="1"></input>
        <label for="stroke">Stroke Color</label>       
      </div>

      <div>
        <div>
          <label for="showStroke">Stroke</label>
          <input type="checkbox" id="showStroke" v-model="showStroke" class="checkbox">
        </div>
      </div>

      <div>
        <button @click="randomizeColors">Change Colors</button>
      </div>

      <div>
        <input class="slider" type="range" id="hue" v-model.number="hue" min="0" max="360" step="1"></input>
        <label for="hue">Color</label>       
      </div>

      <div>
        <input class="slider" type="range" id="hueRange" v-model.number="hueRange" min="-180" max="180" step="1"></input>
        <label for="hueRange">Color Range</label>       
      </div>

      <div>
        <input class="slider" type="range" id="contrast" v-model.number="contrast" min="30" max="50" step="1"></input>
        <label for="contrast">Contrast</label>       
      </div>

      <div>
        <input class="slider" type="range" id="sat" v-model.number="sat" min="70" max="100" step="1"></input>
        <label for="sat">Saturation</label>       
      </div>

      <div>
        <div>
          <label for="reverseColors">Reverse Colors</label>
          <input type="checkbox" id="reverseColors" v-model="reverseColors" class="checkbox">
        </div>
      </div>

      <div>
        <div>
          <label for="orientationColoring">Color Using Tile Orientation</label>
          <input type="checkbox" id="orientationColoring" v-model="orientationColoring" class="checkbox">
        </div>
      </div>

      <div style="width: auto; height: auto;">
        <div>Tiles</div>
        <div class="row" style="display: inline-block;">
          <svg v-for="tile in colorPalette" height = "50" width="50">
            <polygon :points="SVGPoints(tile)" :style="SVGStyle(tile)">
          </svg>
        </div>
      </div>

      <div>
        <button v-if="queryURL.length > 0" @click="submitPattern">Submit Pattern to Gallery</button>
      </div>

    </div>

  </footer>


</div>

<script src="vue-definitions.js"></script>

</body>
</html>